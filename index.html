<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>onmusic</title>
  <script src="https://cdn.jsdelivr.net/npm/vue@2.7.10/dist/vue.js"></script>
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css"
  />
  <script src="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.js"></script>
  <script defer src="script/script.js" type="module"></script>
  <link rel="stylesheet" href="./css/style.min.css">
</head>
<body>
  <div class="body-container">
    <header id="header">
      <h1 class="logo">
        <a href="/">
          <img src="img/common/logo_header.png" alt="main logo">
        </a>
      </h1>
      <div class="header-right">
        <a href="javascript:void(0)" class="jpn">( JPN )</a>
        <p class="sign">
          <a href="javascript:void(0)">로그인</a> /
          <a href="javascript:void(0)">회원가입</a> 
        </p>
        <div id="gnb">
            <div v-show="isOpenGnb" class="bg-depth2" @mouseover="openGnb(true)" @mouseleave="openGnb(false)"></div>
          <div v-for="(item, i) in gnb" :key="i" class="depth1" @mouseover="openGnb(true)" @mouseleave="openGnb(false)">
            {{ item.name }}
            <div v-show="isOpenGnb" class="depth2">
              <a v-for="(link, i) in item.depth2" :key="" :href="link.href" class="link">
                {{ link.name }}
              </a>
            </div>
          </div>
        </div>
      </div>
    </header>
    <main>
      <div id="content-container" class="main">
        <div class="swiper-area main">
          <div class="swiper-wrapper">
            <div class="swiper-slide">
              <img src="./img/pages/main/img_swiper_top1.png" alt="">
            </div>
            <div class="swiper-slide">
              <img src="./img/pages/main/img_swiper_top1.png" alt="">
            </div>
            <div class="swiper-slide">
              <img src="./img/pages/main/img_swiper_top1.png" alt="">
            </div>
          </div>
          <div class="swiper-button-prev"></div>
          <div class="swiper-button-next"></div>
          <div class="swiper-pagination"></div>
        </div>
        <img src="./img/pages/main/icon_twinkle.png" alt="" class="mt60">
        <p class="slogan mt32">WE MAKE YOUR DREAM ON MUSIC</p>
        <div class="accordion-area mt60">
          <details class="accordion">
            <summary class="accordion-header">INTRO</summary>
              <div class="accordion-body">
                <img src="./img/pages/main/img_intro.png" alt="">
              </div>
          </details>
          <details class="accordion">
            <summary class="accordion-header">
              <img src="./img/pages/main/typo_onair.png" alt="">
            </summary>
            <div class="accordion-body onair">
              <div class="bg-onair">
                <img src="./img/pages/main/bg_youtube.png" alt="">
              </div>
              <a href="" class="title">
                <img src="./img/pages/main/typo_youtube.png" alt="">
              </a>
              <div class="swiper-area mt24">
                <div class="swiper-wrapper">
                  <div class="swiper-slide">
                    <img src="https://img.youtube.com/vi/_2rnliYMS9E/mqdefault.jpg" alt="">
                  </div>
                  <div class="swiper-slide">
                    <img src="https://img.youtube.com/vi/l6bdHQSwCuo/mqdefault.jpg" alt="">
                  </div>
                  <div class="swiper-slide">
                    <img src="https://img.youtube.com/vi/FF94qcoVI6w/mqdefault.jpg" alt="">
                  </div>
                </div>
                <div class="btn-wrap">
                  <div class="swiper-button-prev">
                    <img src="./img/pages/main/icon_prev_youtube.png" alt="">
                  </div>
                  <div class="swiper-button-next">
                    <img src="./img/pages/main/icon_next_youtube.png" alt="">
                  </div>
                </div>
              </div>
            </div>
          </details>
          <details class="accordion">
            <summary class="accordion-header">
              <img src="./img/pages/main/typo_onacademy.png" alt="">
            </summary>
            <div class="accordion-body academy">
              <div class="box-exam">
                <h4 class="title mt40">
                  <img src="./img/pages/main/typo_exam.png" alt="">
                </h4>
                <p class="subtitle">( 대학 입시 )</p>
                <div class="img-wrap">
                  <img src="./img/pages/main/img_exam_uni.png" alt="">
                </div>
              </div>
              <div class="box-exam">
                <h4 class="title mt40">
                  <img src="./img/pages/main/typo_exam.png" alt="">
                </h4>
                <p class="subtitle">( 예고 입시 )</p>
                <div class="img-wrap">
                  <img src="./img/pages/main/img_exam_high.png" alt="">
                </div>
              </div>
            </div>
          </details>
          <details class="accordion" open>
            <summary class="accordion-header">
              <img src="./img/pages/main/typo_onaudition.png" alt="">
            </summary>
            <div class="accordion-body audition">
              <div class="swiper-area">
                <div class="swiper-wrapper">
                  <div class="swiper-slide">
                    <img src="./img/pages/main/img_swiper_bottom1.png" alt="">
                  </div>
                  <div class="swiper-slide">
                    <img src="./img/pages/main/img_swiper_bottom2.jpg" alt="">
                  </div>
                </div>
                <div class="swiper-button-prev"></div>
                <div class="swiper-button-next"></div>
              </div>
              <a href="">
                <img src="./img/pages/main/img_audition.png" alt="">
              </a>
            </div>
          </details>
        </div>
        <div class="popup-youtube">
          <iframe width="1280" height="720" src="https://www.youtube.com/embed/_2rnliYMS9E" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
      </div>
    </main>
    <footer id="footer">
      <div class="sns">
        <a v-for="(item, i) in sns" :key="" :href="item.href">{{ item.name }}</a>
      </div>
      <h2 class="logo">
        <img src="img/common/logo_footer.png" alt="">
      </h2>
      <div class="info-time">
        <h3 class="title">
          운영시간
        </h3>
        <p class="weekday">
          평&nbsp;&nbsp;&nbsp;&nbsp;일&nbsp;PM&nbsp;1:00&nbsp;-&nbsp;PM&nbsp;&nbsp;10:00
        </p>
        <p class="weekend">
          토요일&nbsp;PM&nbsp;1:00&nbsp;-&nbsp;PM&nbsp;&nbsp;&nbsp;&nbsp;7:00
        </p>
      </div>
    </footer>
    <aside id="floating-banner">
      <div class="btn-wrap">
        <a href="javascript:void(0)" class="btn open" @click="openExpand">
          <img src="img/common/btn_open.png" alt="">
        </a>
        <transition name="dropdown">
          <div v-show="isExpand" class="expand">
            <a href="javascript:void(0)" class="btn consult">
              <img src="img/common/btn_consult.png" alt="">
            </a>
            <a href="javascript:void(0)" class="btn kakao">
              <img src="img/common/btn_kakao.png" alt="">
            </a>
            <a href="javascript:void(0)" class="btn plus">
              <img src="img/common/btn_plus.png" alt="">
            </a>
          </div>
        </transition>
        <a href="javascript:void(0)" class="btn top" @click="scrollTop">
          <img src="img/common/btn_top.png" alt="">
        </a>
      </div>
    </aside>
  </div>

  <script>
    const accordions = document.querySelectorAll('.accordion');
    function accordionOpen(arr) {
      arr.forEach((accordion) => {
        const { top } = accordion.getBoundingClientRect();
        const windowScrollTop = document.documentElement.scrollTop;
        if(top < 100 && top > -100) {
          if(!accordion.open) {
            const {height, padding} = window.getComputedStyle(accordion.children[1])
            accordion.children[1].style.height = 0;
            accordion.children[1].style.padding = 0;
            setTimeout(() => {
              accordion.children[1].style.height = height;
              accordion.children[1].style.padding = padding;
            }, 10)
            console.log(height, padding)
          }
          accordion.open = true;
        }
      })
    }
    
    window.addEventListener('scroll', () => accordionOpen(accordions));

    
    const swiperMain = new Swiper('.swiper-area.main', {
      slidesPerView: 1,
      spaceBetween: 20,
      loop: true,
      autoplay: {
        delay: 3000,
      },
      speed: 500,
      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
      },
      pagination: {
        el: '.swiper-pagination',
      }
    })
    
    const swiperOnair = new Swiper('.onair .swiper-area', {
      slidesPerView: 3,
      spaceBetween: 20,
      loop: true,
      autoplay: {
        delay: 3000,
      },
      speed: 500,
      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
      },
    })

    const popup = document.querySelector('.popup-youtube')
    const youtube = popup.querySelector('iframe')
    swiperOnair.on('click', function(e) {
      const imgSrc = this.clickedSlide.children[0].src
      const youtubeID = imgSrc.split('/')[4];
      
      youtube.src = `//www.youtube.com/embed/${youtubeID}`

      popup.style.display = 'flex';
      document.body.style.overflow = 'hidden';
      document.body.style.marginRight = '14px';
      
    })
    popup.addEventListener('click', (e) => {
      popup.style.display = 'none';
      document.body.style.overflow = 'auto';
      document.body.style.marginRight = '0';
    })    

    const bgOnair = document.querySelector('.bg-onair');
    bgOnair.style.width = window.innerWidth
    console.log(window.innerWidth, bgOnair.style.width)
    const swiperStar = new Swiper('.audition .swiper-area', {
      slidesPerView: 1,
      spaceBetween: 20,
      loop: true,
      autoplay: {
        delay: 3000,
      },
      speed: 500,
      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
      },
    })
  </script>
</body>
</html>